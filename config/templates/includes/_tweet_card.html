<div class="p-3 border-bottom border-secondary">
    <div class="d-flex position-relative w-100">
        <!-- プロフィール画像部分 -->
        <div class="flex-shrink-0" style="width: 48px; margin-right: 12px;">
            {% include "includes/_profile_image.html" with user=tweet.user size=48 %}
        </div>
        
        <!-- コンテンツ部分 -->
        <div class="flex-grow-1" style="min-width: 0; max-width: calc(100% - 60px);">
            <!-- ユーザー情報 -->
            {% include "includes/_user_info.html" with user=tweet.user show_timestamp=True timestamp=tweet.created_at %}

            <!-- ツイート本文 -->
            {% if tweet.content %}
            <div class="mb-3" style="overflow-wrap: break-word; word-break: break-word;">
                {{ tweet.content }}
            </div>
            {% endif %}

            <!-- ツイート画像 -->
            {% if tweet.image %}
            <div class="tweet-image-container">
                <img src="{{ tweet.image.url }}" 
                     alt="ツイート画像" 
                     class="tweet-image">
            </div>
            {% endif %}

            <!-- インタラクションボタン -->
            <div class="d-flex justify-content-between align-items-center w-100">
                <div class="d-flex align-items-center">
                    <button class="btn btn-ghost p-1">
                        <i class="bi bi-chat"></i>
                    </button>
                </div>
                <div class="d-flex align-items-center">
                    <button class="btn btn-ghost p-1">
                        <i class="bi bi-repeat"></i>
                    </button>
                </div>
                <div class="d-flex align-items-center">
                    <button class="btn btn-ghost p-1">
                        <i class="bi bi-heart"></i>
                    </button>
                </div>
                <div class="d-flex align-items-center">
                    <button class="btn btn-ghost p-1">
                        <i class="bi bi-bookmark"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .tweet-image-container {
        max-width: 100%;
        margin-bottom: 1rem;
    }
    
    .tweet-image {
        width: 100%;
        object-fit: contain;
        border-radius: 0.375rem;
    }
    
    /* モバイルサイズ */
    .tweet-image {
        max-height: 80vh;
    }
    
    /* タブレットサイズ */
    @media (min-width: 768px) {
        .tweet-image-container {
            max-width: 500px;
        }
        .tweet-image {
            max-height: 70vh;
        }
    }
    
    /* デスクトップサイズ */
    @media (min-width: 1024px) {
        .tweet-image-container {
            max-width: 450px;
        }
        .tweet-image {
            max-height: 60vh;
        }
    }
</style>
